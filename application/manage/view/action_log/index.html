{extend name="common/base" }

{block name="style"}
<style type="text/css">
pre.am-pre-scrollable{
	margin: 0px;
	color: #F90000;
	max-height: 16rem;
}
.am-table-striped td{
	background-color: #FFFFFF !important;
}
.am-selected{
	width: 100%;
}
</style>
{/block}

{block name="admin-content"}
<form action="{:url('index')}" class="search-form">
<div class="am-g">

	<div class="am-u-sm-12 am-u-md-2">
		<div class="am-form-group">
			<select class="nd-search-field" name="uid" data-am-selected="{btnSize: 'sm'}">
				<option value="**">不限</option>
			{volist name="uid_list" id="vo"}
				<option {eq name="uid" value="$vo.log_uid"}selected{/eq} value="{$vo.log_uid}">{$vo.log_user_name} ({$vo.log_uid})</option>
			{/volist}
	    	</select>
		</div>
	</div>
	
	<div class="am-u-sm-12 am-u-md-2">
		<div class="am-form-group am-input-group-sm">
			<input type="text" class="am-form-field nd-search-field" name="start_time" placeholder="开始日期" value="{$start_time}" data-am-datepicker="{format: 'yyyy-mm-dd'}"/>
		</div>
	</div>
	
	<div class="am-u-sm-12 am-u-md-2">
		<div class="am-form-group am-input-group-sm">
			<input type="text" class="am-form-field nd-search-field" name="end_time" placeholder="结束日期" value="{$end_time}" data-am-datepicker="{format: 'yyyy-mm-dd'}" />
		</div>
	</div>
	
	<div class="am-u-sm-12 am-u-md-2">
		<div class="am-form-group am-input-group-sm">
			<input type="text" class="am-form-field nd-search-field" name="method" placeholder="请求方法" value="{$method}" />
		</div>
	</div>
	
	<div class="am-u-sm-12 am-u-md-2">
		<div class="am-form-group am-input-group-sm">
			<input type="text" class="am-form-field nd-search-field" name="action" placeholder="模块|控制器|操作" value="{$action}" />
		</div>
	</div>
	
	<div class="am-u-sm-12 am-u-md-2">
		<div class="am-input-group am-input-group-sm">
			<input type="text" class="am-form-field nd-search-field" name="keyword" placeholder="内容关键词" value="{$keyword}" />
			<span class="am-input-group-btn">
				<button class="am-btn am-btn-default nd-search" target-form="search-form" type="button">搜索</button>
			</span>
		</div>
	</div>
</div>
</form>

<div class="am-g">
	<div class="am-u-sm-12">
		<table class="am-table am-table-striped am-table-radius am-table-bordered">
			<thead>
				<tr>
					<th>访问时间</th>
					<th>用户ID</th>
					<th>请求方法</th>
					<th>模块</th>
					<th>控制器</th>
					<th>操作</th>
				</tr>
			</thead>
			<tbody>
			{volist name="list" id="vo"}
				<tr>
					<td>{$vo.log_time|date='Y-m-d H:i:s',###}</td>
					<td class="am-text-success">{$vo.log_user_name} ({$vo.log_uid})</td>
					<td class="am-text-secondary">{$vo.log_method}</td>
					<td class="am-text-danger">{$vo.log_module}</td>
					<td class="am-text-danger">{$vo.log_controller}</td>
					<td class="am-text-danger">{$vo.log_action}</td>
				</tr>
				<tr>
					<td colspan="6">
<pre class="am-pre-scrollable">
{$vo.log_data}
</pre>
					</td>
				</tr>
			{/volist}
			</tbody>
		</table>
		
		{if condition="!empty($page)"}
		<div class="am-g admin-pagination">
			<div class="am-fl admin-pagination-info">共 {$total_count} 条记录</div>
				{$page}
			</div>
			<hr data-am-widget="divider" style="" class="am-divider am-divider-dashed" />
		</div>
		{/if}
		
	</div>
</div>
{/block}